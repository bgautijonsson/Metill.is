{"title":"Tekjur, skattar og kaupmáttur","markdown":{"yaml":{"title":"Tekjur, skattar og kaupmáttur","pagetitle":"Tekjur, skattar og kaupmáttur","subtitle":"Greining á tekjuskattsgögnum Hagstofunnar","description":"Stundum les maður að skattakerfið ýti undir ójöfnuð, eða að það séu of háir skattar á þeim efnameiru. Hvort er það? Hér nota ég skattagögn Hagstofunnar til að skoða tekjur og skatta eftir tekjutíundum. Ég get ekki sagt hvort það sé sanngjarnt, en ég get sýnt hvernig það hefur breyst með tímanum.\n","author":[{"name":"Brynjólfur Gauti Guðrúnar Jónsson","url":"bggj.is","affiliation":"Tölfræði, Raunvísindadeild Háskóla Íslands","affiliation-url":"https://www.hi.is/tolfraedi_0"}],"date":"2022/09/11","format":{"html":{"code-fold":true,"smooth-scroll":true,"link-external-newwindow":true}},"execute":{"echo":true,"warning":false,"cache":false},"editor":"source","title-block-banner":true,"categories":["skattar","efnahagur","R","íslenska"],"href":"posts/skattagogn/index.qmd","image":"image.png","twitter-card":{"image":"image.png"}},"headingText":"| include: false","containsRefs":false,"markdown":"\n\n```{r}\n\nlibrary(cowplot)\nlibrary(tidyverse)\nlibrary(scales)\nlibrary(pxweb)\nlibrary(ggthemes)\nlibrary(kableExtra)\nlibrary(gganimate)\nlibrary(lubridate)\nlibrary(geomtextpath)\nlibrary(ggtext)\nlibrary(readxl)\nlibrary(janitor)\nlibrary(plotly)\nlibrary(DBI)\nlibrary(config)\nlibrary(visitalaneysluverds)\nlibrary(metill)\ntheme_set(theme_metill())\n\nusr <- config::get(\"postgres_user\")\ncon <- dbConnect(RPostgres::Postgres(), \n                 dbname = usr$dbname, \n                 host = usr$host,\n                 port = usr$port, \n                 user = usr$username, \n                 password = usr$password)\n\nd <- tbl(con, \"tiundamork_1997_2021\") \n```\n\n\n# Skilgreiningar\n\n## Tekjutíund\n\n```{r}\nplot_dat <- d |> \n    filter(tiundarbreyta == \"Heildartekjur\",\n           name %in% c(\"Tekjur alls\", \"Fjöldi í hóp\"),\n           ar == 2021) |> \n    collect() |> \n    pivot_wider(names_from = name, values_from = value) |> \n    janitor::clean_names()\n\nfjoldi <- number(sum(plot_dat$fjoldi_i_hop), big.mark = \".\", decimal.mark = \",\")\ntekjur <- number(sum(plot_dat$tekjur_alls), big.mark = \".\", decimal.mark = \",\")\ntekjur_a_mann <- number(sum(plot_dat$tekjur_alls) / sum(plot_dat$fjoldi_i_hop), acrucay = 0.1, big.mark = \".\", decimal.mark = \",\")\ntekjur_a_mann_a_manudi <- number(sum(plot_dat$tekjur_alls) / sum(plot_dat$fjoldi_i_hop) / 12, accuracy = 0.1, big.mark = \".\", decimal.mark = \",\")\n```\n\nÞað er fátt jafn sexý og þegar einhver talar um tekjutíundir, en hvað þýðir það? Í gögnum Hagstofunnar um tekjur eru samtals `r fjoldi` einstaklingar og þau fengu samtals tekjur upp á `r tekjur` milljónir króna, eða `r tekjur_a_mann` milljónir króna á mann á ári (`r tekjur_a_mann_a_manudi` milljónir á mánuði).\n\nEn þessir einstaklingar höfðu ekki allir sömu tekjur, heldur er tekjum dreift ójafnt. Sum hafa hærri tekjur og aðrir lægri. Ímyndum að við tökum þessa `r fjoldi` einstaklinga, röðum þeim í vaxandi röð eftir tekjum þeirra og skiptum svo í tíu jafnstóra hópa. Þá erum við komin með það sem kallast *tekjutíundir*! Í *töflu I* að neðan sjáum við hvernig heildartekjur skiptust í tekjutíundir árið 2021.\n\n**Hér ber að hafa í huga að allir einstaklingar sem náð hafa 16 ára aldri teljast með í þessum gögnum. Því þýða mánaðartekjur upp á 37 þúsund kr í lægstu tíundinni ekki að fjölskyldur þurfi að lifa á þeim tekjum, heldur eru þarna margir einstaklingar með engar eða mjög litlar tekjur.**\n\n```{r}\nplot_dat |> \n    mutate(\n        p = tekjur_alls / sum(tekjur_alls),\n        p = percent(p, decimal.mark = \",\", big.mark = \".\"),\n        tekjur_a_mann = tekjur_alls / fjoldi_i_hop * 1e6 / 12,\n        tekjur_a_mann = number(\n            tekjur_a_mann, suffix = \" kr\", decimal.mark = \",\", big.mark = \".\"\n        ),\n        tekjur_a_mann = ifelse(\n            tiundarhluti == 1, \n            str_c(\n                tekjur_a_mann, \n                footnote_marker_alphabet(1, format = \"html\")\n            ),\n            tekjur_a_mann\n        ),\n        tekjur_alls = number(\n            tekjur_alls, suffix = \" mkr\", decimal.mark = \",\", big.mark = \".\"\n        )\n    ) |> \n    select(tiundarhluti, tekjur_a_mann, tekjur_alls, p) |> \n    kable(\n        format = \"html\",\n        col.names = c(\"Tekjutíund\", \"Tekjur á mann<br>(á mánuði)\", \"Tekjur alls\", \"Hlutfall allra tekna\"), \n        escape = FALSE, \n        align = c(\"c\", \"c\", \"c\", \"c\"),\n        caption = \"Tafla I. Skipting heildartekna á tekjutíundir árið 2021\"\n    ) |> \n    kable_styling(bootstrap_options = c(\"striped\", \"hover\"), full_width = FALSE) |> \n    footnote(alphabet = c(\"Einstaklingar á aldrinum 16-17 hafa oft engar eða litlar tekjur meirihluta árs.\"), fixed_small_size = T)\n```\n\nVið getum skipt öðrum breytum en tekjum í tíundir. Í [mælaborðinu mínu um skattahögn Hagstofunnar](https://bggj.is/skattagogn){target=\"_blank\"} er hægt að skoða ýmsar breytur eftir tíundum heildartekna, ráðstöfunartekna, eigna og annarra breytna!\n\n\n\n# Heildartekjur og skattar\n\nVið getum skoðað skattgreiðslur mismunandi tekjuhópa á tvo vegu:\n\n* Hversu hátt hlutfall af öllum sköttum borgar hver tekjuhópur?\n* Hversu hátt hlutfall af eigin tekjum borgar hver tekjuhópur í skatta?\n\n## Hversu hátt hlutfall af öllum sköttum borgar hver tekjuhópur?\n\nÞað ætti ekki að koma á óvart að efri tekjutíundir borgi hærra hlutfall af öllum sköttum heldur en lægri tíundir. [Fjármálaráðuneytið benti á það í tilkynningu þann 23. júní 2021](https://www.stjornarradid.is/efst-a-baugi/frettir/stok-frett/2022/06/23/Kaupmattur-allra-hopa-aukist-og-allir-nema-tekjuhaestu-greida-laegri-skatt-/){target=\"_blank\"} að efstu fimm tekjutíundirnar borgi *83%* af öllum sköttum. Er þetta eftirtektarvert? Út frá töflunni okkar að ofan getum við séð að efstu fimm tíundirnar fá\n\n$$\n34.4\\% + 17.4\\% + 12.8\\% + 9.9\\% + 7.8\\% = 82.3\\%\n$$\n\naf öllum tekjum, og því ætti það alls ekki að koma okkur á óvart að þau borgi það hátt hlutfall af öllum sköttum. Þessi tala, 83%, þýðir því ekki að það sé vegið að þeim tekuhærri á óréttlátan hátt.\n\nEn hvað borgar hver tekjutíund mikið í skatta og hvernig ber því saman við heildartekjur þeirra? Á myndinni að neðan ber ég þetta tvennt saman. Hægt er að smella á **Play** til að sjá þróunina frá 1997 til 2021 eða velja ár til að skoða. Ef allir tekjuhópar borguðu jafnt hlutfall í skatta væru allir punktarnir á brotnu línunni.\n\n```{r}\n#| fig-asp: 1\n#| out-width: \"100%\"\n#| cache: false\n#| column: page\n\nplot_dat <- d |>\n    filter(tiundarbreyta %in% \"Heildartekjur\",\n           name %in% c(\"Tekjur alls\", \n                       \"Ráðstöfunartekjur (Tekjur - Skattar)\",\n                       \"Fjöldi í hóp\")) |> \n    collect() |> \n    pivot_wider() |> \n    rename(fjoldi = \"Fjöldi í hóp\") |> \n    mutate(`Skattar alls` = `Tekjur alls` - `Ráðstöfunartekjur (Tekjur - Skattar)`) |> \n    select(-\"Ráðstöfunartekjur (Tekjur - Skattar)\") |> \n    pivot_longer(c(-ar, -tiundarbreyta, -tiundarhluti, -fjoldi)) |> \n    group_by(ar, name) |> \n    mutate(p = value / sum(value)) |> \n    ungroup()\n\n\nplot_dat <- plot_dat |> \n    select(-tiundarbreyta, -value) |> \n    pivot_wider(names_from = name, values_from = p) |> \n    janitor::clean_names() |> \n    rename(tekjur_hlutf = tekjur_alls, skattar_hlutf = skattar_alls) |> \n    inner_join(\n        plot_dat |> \n            select(-tiundarbreyta, -p) |> \n            pivot_wider(names_from = name, values_from = value) |> \n            janitor::clean_names(),\n        by = c(\"ar\", \"tiundarhluti\", \"fjoldi\")\n    ) |> \n    inner_join(\n        vnv() |> \n            group_by(ar = year(date)) |> \n            summarise(visitala = mean(cpi),\n                      .groups = \"drop\") |> \n            mutate(visitala = visitala / visitala[ar == max(ar)]),\n        by = \"ar\"\n    ) |> \n    mutate(tekjur_alls = tekjur_alls / visitala,\n           skattar_alls = skattar_alls / visitala,\n           skattar_hlutf_tekjum = skattar_alls / tekjur_alls) |> \n    mutate(text = str_c(\"<b>Tekjutíund: \", tiundarhluti, \"</b>\", \"\\n\",\n                        \"Ár: \", ar, \"\\n\",\n                        \"Tekjur (á mann á mánuði): \", number(tekjur_alls * 1e6 / (fjoldi * 12), suffix = \" kr\", big.mark = \".\", decimal.mark = \",\"), \"\\n\",\n                        \"% allra tekna: \", percent(tekjur_hlutf, accuracy = 0.1), \"\\n\",\n                        \"Skattar (á mann á mánuði): \", number(skattar_alls * 1e6 / (fjoldi * 12), suffix = \" kr\", big.mark = \".\", decimal.mark = \",\"), \"\\n\",\n                        \"% allra skatta: \", percent(skattar_hlutf, accuracy = 0.1), \"\\n\",\n                        \"Skattbyrði (% af tekjum): \", percent(skattar_hlutf_tekjum, accuracy = 0.1)))\n\n\n\np <- plot_dat |> \n    ggplot(aes(tekjur_hlutf, skattar_hlutf, \n               frame = ar, text = text)) +\n    geom_abline(intercept = 0, slope = 1, lty = 2) +\n    geom_point() +\n    scale_x_continuous(labels = label_percent(),\n                       expand = expansion(),\n                       limits = c(min(plot_dat$skattar_hlutf), 0.5),\n                       breaks = seq(0, 50, by = 10)/100) +\n    scale_y_continuous(labels = label_percent(),\n                       expand = expansion(),\n                       limits = c(min(plot_dat$skattar_hlutf), 0.5),\n                       breaks = seq(0, 50, by = 10)/100) +\n    theme(plot.margin = margin(t = 5, r = 5, b = 5, l = 5)) +\n    labs(x = \"% af öllum tekjum\",\n         y = \"% af öllum sköttum\",\n         title = \"Hvað fær hver tekjutíund háa % af öllum tekjum og sköttum?\")\n\n\nggplotly(\n    p,\n    tooltip = \"text\"\n) |> \n    animation_opts(\n        transition = 500,\n        redraw = FALSE\n        \n    ) |> \n    animation_slider(currentvalue = list(prefix = \"Ár:\")) |> \n    layout(\n        hoverlabel = list(align = \"left\")\n    )\n\n```\n\n<br>\n<br>\n\n## Skattbyrði\n\nVið getum líka skoðað *skattbyrði*, eða hversu hátt hlutfall af tekjum sínum hver hópur borgar í skatta. Eins og að ofan er hægt að smella á **Play** til að sjá þróunina frá 1997 til 2021 eða velja ár sjálf til að skoða. Í  [sömu tilkynningu frá fjármálaráðuneytinu](https://www.stjornarradid.is/efst-a-baugi/frettir/stok-frett/2022/06/23/Kaupmattur-allra-hopa-aukist-og-allir-nema-tekjuhaestu-greida-laegri-skatt-/){target=\"_blank\"} og ég nefndi að ofan var bent á að skattbyrði allra tekjutíunda nema þeirri efstu hefði lækkað frá 2019 til 2021. Það er rétt, en það er gott að hafa í huga að skattbyrði sömu tíunda hækkaði flestöll árin frá 1997 til 2019. \n\nNeðar í færslunni mun ég svo sýna hvernig skattbyrði hefur hækkað síðan 1997 hjá öllum tekjutíundum nema þeirri efstu.\n\n```{r}\n#| fig-asp: 1\n#| cache: false\n#| column: page\n\nplot_dat <- plot_dat |> \n    mutate(\n        text = str_c(\"<b>Tekjutíund: \", tiundarhluti, \"</b>\", \"\\n\",\n                     \"Ár: \", ar, \"\\n\",\n                     \"Tekjur (á mann á mánuði): \", number(tekjur_alls * 1e6 / (fjoldi * 12), suffix = \" kr\", big.mark = \".\", decimal.mark = \",\"), \"\\n\",\n                     \"% allra tekna: \", percent(tekjur_hlutf, accuracy = 0.1), \"\\n\",\n                     \"Skattar (á mann á mánuði): \", number(skattar_alls * 1e6 / (fjoldi * 12), suffix = \" kr\", big.mark = \".\", decimal.mark = \",\"), \"\\n\",\n                     \"% allra skatta: \", percent(skattar_hlutf, accuracy = 0.1), \"\\n\",\n                     \"<b>Skattbyrði (% af tekjum): \", percent(skattar_hlutf_tekjum, accuracy = 0.1), \"</b>\")\n    )\np <- plot_dat |> \n    ggplot(aes(tiundarhluti, skattar_hlutf_tekjum, \n               frame = ar, text = text)) +\n    geom_line(aes(group = \"none\")) +\n    geom_point() +\n    scale_x_continuous(expand = expansion(add = 0.05),\n                       breaks = seq(0, 10, by = 1)) +\n    scale_y_continuous(labels = label_percent(),\n                       expand = expansion(add = 0.002),\n                       breaks = seq(0, 50, by = 10)/100) +\n    theme(plot.margin = margin(t = 5, r = 5, b = 5, l = 5)) +\n    labs(x = \"Tekjutíund\",\n         y = \"Skattbyrðu (Skattar sem % af tekjum)\",\n         title = \"Skattbyrði eftir tekjutíund\")\n\n\nggplotly(\n    p,\n    tooltip = \"text\"\n) |> \n    animation_opts(\n        transition = 500,\n        redraw = FALSE\n        \n    ) |> \n    animation_slider(currentvalue = list(prefix = \"Ár:\")) |> \n    layout(\n        hoverlabel = list(align = \"left\")\n    )\n```\n\n<br>\n<br>\n\n# Þróun frá 1997\n\n## Kaupmáttur heildartekna\n\nKaupmáttur er einfaldlega hækkun á tekjum umfram verðbólgu *(hækkun á verðlagi, mælt með vísitölu neysluverðs)*. Hér sjáum við hækkun kaupmáttar frá 1997 hjá meðaleinstakling úr hverru tekjutíund. \n\n```{r}\n#| fig-asp: 0.9\n#| cache: false\n#| column: page\n\n\nplot_dat <- d |> \n    filter(tiundarbreyta == \"Heildartekjur\",\n           name %in% c(\"Tekjur alls\", \"Fjöldi í hóp\")) |> \n    collect() |> \n    pivot_wider() |> \n    rename(fjoldi = \"Fjöldi í hóp\") |> \n    pivot_longer(c(-ar, -tiundarbreyta, -tiundarhluti, -fjoldi)) |> \n    group_by(ar, name) |> \n    mutate(p = value / sum(value)) |> \n    ungroup() |> \n    select(-tiundarbreyta) |> \n    inner_join(\n        vnv() |> \n            group_by(ar = year(date)) |> \n            summarise(cpi = mean(cpi),\n                      .groups = \"drop\") |> \n            mutate(cpi = cpi / cpi[ar == max(ar)]),\n        by = \"ar\"\n    ) |> \n    mutate(\n        value = (value / fjoldi) / cpi,\n        index = value / value[ar == min(ar)],\n        text = str_c(\"<b>Tekjutíund: \", tiundarhluti, \"</b>\", \"\\n\",\n                     \"Ár: \", ar, \"\\n\",\n                     \"Heildartekjur (á mann á mánuði): \",\n                     number(value * 1e6 / 12, suffix = \" kr\", big.mark = \".\", decimal.mark = \",\"), \"\\n\",\n                     \"Breyting (síðan 1997): \", \n                     ifelse(index >= 1, \"+\", \"\"),\n                     percent(index - 1, accuracy = 0.01, big.mark = \".\", decimal.mark = \",\")\n        )\n    )\n\np <- plot_dat |> \n    ggplot(aes(ar, index, text = text)) +\n    geom_hline(yintercept = 1, lty = 2) +\n    geom_line(aes(group = tiundarhluti, col = tiundarhluti)) +\n    scale_x_continuous() +\n    scale_y_log10(\n        labels = function(x) percent(x - 1),\n        breaks = c(\n            1, 1.25, 1.5, 2, 3,\n            1/1.25, 1/1.5, 1/2, 1/3\n        )\n    ) +\n    scale_colour_distiller(type = \"div\", palette = \"RdYlBu\", direction = 1) +\n    theme(legend.position = \"none\") +\n    labs(x = NULL,\n         y = NULL,\n         title = \"Breyting á kaupmætti heildartekna frá 1997\")\n\nggplotly(\n    p,\n    tooltip = \"text\"\n) |> \n    layout(\n        hoverlabel = list(align = \"left\")\n    )\n```\n\n## Kaupmáttur ráðstöfunartekna\n\nVið höfum frekar áhuga á kaupmætti ráðstöfunartekna *(heildartekjur að frádegnum sköttum)*. \n\n```{r}\n#| fig-asp: 0.9\n#| cache: false\n#| column: page\n\n\nplot_dat <- d |> \n    filter(tiundarbreyta == \"Ráðstöfunartekjur\",\n           name %in% c(\"Ráðstöfunartekjur (Tekjur - Skattar)\", \"Fjöldi í hóp\")) |> \n    collect() |> \n    pivot_wider() |> \n    rename(fjoldi = \"Fjöldi í hóp\") |> \n    pivot_longer(c(-ar, -tiundarbreyta, -tiundarhluti, -fjoldi)) |> \n    group_by(ar, name) |> \n    mutate(p = value / sum(value)) |> \n    ungroup() |> \n    select(-tiundarbreyta) |> \n    inner_join(\n        vnv() |> \n            group_by(ar = year(date)) |> \n            summarise(cpi = mean(cpi),\n                      .groups = \"drop\") |> \n            mutate(cpi = cpi / cpi[ar == max(ar)]),\n        by = \"ar\"\n    ) |> \n    mutate(\n        value = (value / fjoldi) / cpi,\n        index = value / value[ar == min(ar)],\n        text = str_c(\"<b>Tekjutíund: \", tiundarhluti, \"</b>\", \"\\n\",\n                     \"Ár: \", ar, \"\\n\",\n                     \"Ráðstöfunartekjur (á mann á mánuði): \", \n                     number(value * 1e6 / 12, suffix = \" kr\", big.mark = \".\", decimal.mark = \",\"), \"\\n\",\n                     \"Breyting (síðan 1997): \", \n                     ifelse(index >= 1, \"+\", \"\"),\n                     percent(index - 1, accuracy = 0.01, big.mark = \".\", decimal.mark = \",\")\n        )\n    )\n\np <- plot_dat |> \n    ggplot(aes(ar, index, text = text)) +\n    geom_hline(yintercept = 1, lty = 2) +\n    geom_line(aes(group = tiundarhluti, col = tiundarhluti)) +\n    scale_x_continuous() +\n    scale_y_log10(\n        labels = function(x) percent(x - 1),\n        breaks = c(\n            1, 1.25, 1.5, 2, 3,\n            1/1.25, 1/1.5, 1/2, 1/3\n        )\n    ) +\n    scale_colour_distiller(type = \"div\", palette = \"RdYlBu\", direction = 1) +\n    theme(legend.position = \"none\") +\n    labs(x = NULL,\n         y = NULL,\n         title = \"Breyting á kaupmætti ráðstöfunartekna frá 1997\")\n\nggplotly(\n    p,\n    tooltip = \"text\"\n) |> \n    layout(\n        hoverlabel = list(align = \"left\")\n    )\n```\n\n\n\n## Skattbyrði\n\nÞað er líka áhugavert að skoða breytingu í skattbyrði milli 1997 og 2021. Hér þýðir jákvæð prósenta að skattbyrði hefur aukist, en neikvæð prósenta að hún sé minni. Við sjáum að skattbyrði hefur aukist hjá öllum tekjutíundunum nema þeirri efstu. Hér erum við að skoða skattbyrði hvers hóps í heild sinni, þannig að það getur alltaf verið að þetta passi ekki við hvern og einn einstakling, heldur á þetta við um meðaltal allra einstaklinganna.\n\n```{r}\n#| fig-asp: 0.9\n#| cache: false\n#| column: page\n\nplot_dat <- d |>\n    filter(tiundarbreyta %in% \"Heildartekjur\",\n           name %in% c(\"Tekjur alls\", \n                       \"Ráðstöfunartekjur (Tekjur - Skattar)\",\n                       \"Fjöldi í hóp\")) |> \n    collect() |> \n    pivot_wider() |> \n    rename(fjoldi = \"Fjöldi í hóp\") |> \n    mutate(`Skattar alls` = `Tekjur alls` - `Ráðstöfunartekjur (Tekjur - Skattar)`) |> \n    select(-\"Ráðstöfunartekjur (Tekjur - Skattar)\") |> \n    janitor::clean_names() |> \n    mutate(\n        value = skattar_alls / tekjur_alls,\n        index = value - value[ar == min(ar)],\n        text = str_c(\"<b>Tekjutíund: \", tiundarhluti, \"</b>\", \"\\n\",\n                     \"Ár: \", ar, \"\\n\",\n                     \"Skattbyrði: \", \n                     percent(value, accuracy = 0.01, big.mark = \".\", decimal.mark = \",\"), \"\\n\",\n                     \"Breyting (síðan 1997): \", \n                     ifelse(index >= 0, \"+\", \"\"),\n                     percent(index, accuracy = 0.01, big.mark = \".\", decimal.mark = \",\", suffix = \"%-stig\")\n        )\n    )\n\np <- plot_dat |> \n    ggplot(aes(ar, index, text = text)) +\n    geom_hline(yintercept = 0, lty = 2) +\n    geom_line(aes(group = tiundarhluti, col = tiundarhluti)) +\n    scale_x_continuous() +\n    scale_y_continuous(\n        labels = label_percent(suffix = \"%-stig\")\n    ) +\n    scale_colour_distiller(type = \"div\", palette = \"RdYlBu\", direction = 1) +\n    theme(legend.position = \"none\") +\n    labs(x = NULL,\n         y = NULL,\n         title = \"Breyting á skattbyrði miðað við 1997\")\n\nggplotly(\n    p,\n    tooltip = \"text\"\n) |> \n    layout(\n        hoverlabel = list(align = \"left\")\n    )\n```\n\n\n```{r}\n#| include: false\n\np <- plot_dat |> \n    ggplot(aes(ar, index)) +\n    geom_hline(yintercept = 0, lty = 2) +\n    geom_line(aes(group = tiundarhluti, col = tiundarhluti)) +\n    geom_rangeframe() +\n    geom_text(\n        data = plot_dat |> \n            filter(ar == max(ar)) |> \n            mutate(\n                index = case_when(\n                    tiundarhluti == 1 ~ index + 0.0022,\n                    tiundarhluti == 8 ~ index - 0.0022,\n                    TRUE ~ index\n                )\n            ),\n        aes(col = tiundarhluti, label = str_c(tiundarhluti, \". tíund\")), \n        hjust = 0, \n        nudge_x = 0.2\n    ) +\n    scale_x_tufte(\n        breaks = seq(1997, 2021, by = 3),\n        limits = c(1997, 2023)\n    ) +\n    scale_y_tufte(\n        labels = label_percent(suffix = \"%-stig\", decimal.mark = \",\", big.mark = \".\"),\n        breaks = tufte_breaks(plot_dat$index)\n    ) +\n    scale_colour_distiller(type = \"div\", palette = \"RdYlBu\", direction = 1) +\n    theme(legend.position = \"none\") +\n    labs(x = NULL,\n         y = NULL,\n         colour = \"Tekjutíund\",\n         title = \"Breyting á skattbyrði miðað við 1997\",\n         subtitle = \"Skattbyrði hefur aukist hjá öllum tekjutíundum nema þeirri hæstu\",\n         caption = \"Mynd frá bggj.is byggð á skattframtalsgögnum Hagstofunnar\")\n\nggsave(p, filename = \"image.png\",\n       width = 8, height = 0.621 * 8, scale = 1.3, bg = \"white\")\n```\n\n\n# Gögn\n\nHér nota ég gögn Hagstofu um [skuldir, eignir, tekjur og fleira](https://hagstofa.is/talnaefni/samfelag/lifskjor/skuldir-og-eignir/){target=\"_blank\"} sem hún vinnur úr skattframtölum Íslendinga. Ég hef áður sótt þessi gögn og unnið úr þeim svo ég sýni gagnaúrvinnsluna ekki hér. Hins vegar mun ég birta færslu á [Patreon síðunni minni](https://www.patreon.com/bggj){target=\"_blank\"} þar sem ég fer yfir hvernig ég bjó til og uppfæri SQL gagnagrunninn minn, þar á meðal hvernig ég hef unnið úr þessum gögnum."},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":false,"freeze":true,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../style.css"],"output-file":"index.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.1.175","editor":"source","theme":["paper","../../theme.scss"],"title-block-banner":true,"title":"Tekjur, skattar og kaupmáttur","pagetitle":"Tekjur, skattar og kaupmáttur","subtitle":"Greining á tekjuskattsgögnum Hagstofunnar","description":"Stundum les maður að skattakerfið ýti undir ójöfnuð, eða að það séu of háir skattar á þeim efnameiru. Hvort er það? Hér nota ég skattagögn Hagstofunnar til að skoða tekjur og skatta eftir tekjutíundum. Ég get ekki sagt hvort það sé sanngjarnt, en ég get sýnt hvernig það hefur breyst með tímanum.\n","author":[{"name":"Brynjólfur Gauti Guðrúnar Jónsson","url":"bggj.is","affiliation":"Tölfræði, Raunvísindadeild Háskóla Íslands","affiliation-url":"https://www.hi.is/tolfraedi_0"}],"date":"2022/09/11","categories":["skattar","efnahagur","R","íslenska"],"href":"posts/skattagogn/index.qmd","image":"image.png","twitter-card":{"image":"image.png"},"smooth-scroll":true},"extensions":{"book":{"multiFile":true}}}}}